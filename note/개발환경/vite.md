# vite

## vite

vite 패키지 실행

```typescript
npm create vite@latest
```

해당 패키지에서 node_module 설치

```typescript
cd [폴더명]
npm i
```

## .gitignore

- [github node gitignore](https://github.com/github/gitignore/blob/main/Node.gitignore)

```typescript
# Logs
logs
*.log
npm-debug.log*
yarn-debug.log*
yarn-error.log*
lerna-debug.log*
.pnpm-debug.log*

# Diagnostic reports (https://nodejs.org/api/report.html)
report.[0-9]*.[0-9]*.[0-9]*.[0-9]*.json

# Runtime data
pids
*.pid
*.seed
*.pid.lock

# Directory for instrumented libs generated by jscoverage/JSCover
lib-cov

# Coverage directory used by tools like istanbul
coverage
*.lcov

# nyc test coverage
.nyc_output

# Grunt intermediate storage (https://gruntjs.com/creating-plugins#storing-task-files)
.grunt

# Bower dependency directory (https://bower.io/)
bower_components

# node-waf configuration
.lock-wscript

# Compiled binary addons (https://nodejs.org/api/addons.html)
build/Release

# Dependency directories
node_modules/
jspm_packages/

# Snowpack dependency directory (https://snowpack.dev/)
web_modules/

# TypeScript cache
*.tsbuildinfo

# Optional npm cache directory
.npm

# Optional eslint cache
.eslintcache

# Optional stylelint cache
.stylelintcache

# Microbundle cache
.rpt2_cache/
.rts2_cache_cjs/
.rts2_cache_es/
.rts2_cache_umd/

# Optional REPL history
.node_repl_history

# Output of 'npm pack'
*.tgz

# Yarn Integrity file
.yarn-integrity

# dotenv environment variable files
.env
.env.development.local
.env.test.local
.env.production.local
.env.local

# parcel-bundler cache (https://parceljs.org/)
.cache
.parcel-cache

# Next.js build output
.next
out

# Nuxt.js build / generate output
.nuxt
dist

# Gatsby files
.cache/
# Comment in the public line in if your project uses Gatsby and not Next.js
# https://nextjs.org/blog/next-9-1#public-directory-support
# public

# vuepress build output
.vuepress/dist

# vuepress v2.x temp and cache directory
.temp
.cache

# Docusaurus cache and generated files
.docusaurus

# Serverless directories
.serverless/

# FuseBox cache
.fusebox/

# DynamoDB Local files
.dynamodb/

# TernJS port file
.tern-port

# Stores VSCode versions used for testing VSCode extensions
.vscode-test

# yarn v2
.yarn/cache
.yarn/unplugged
.yarn/build-state.yml
.yarn/install-state.gz
.pnp.*
```

## ESLint 설치 및 환경설정

[typescript-eslint 공식문서](https://typescript-eslint.io/getting-started/)

설치

```typescript
npm install --save-dev @typescript-eslint/parser @typescript-eslint/eslint-plugin eslint typescript eslint-plugin-react eslint-plugin-jsx-a11y
```

.eslintrc.\* 속성 추가

- module is not defined가 뜰 경우를 대비하여 아래의 속성값을 넣어준다.

```typescript
{
  ...
  "env": {... node: true}
  ...
}
```

package.json 파일 속성 추가

- --cache 옵션을 사용하면 lint 명령어를 입력할 때 모든 코드를 검사하지 않고 변경된 파일만 검사한다.

```typescript
{
  "script": {
    ...
    "lint": --cache
    ...
  }
}
```

## Prettier

[Prettier 공식문서](https://prettier.io/docs/en/index.html)

prettier 설치

- eslint와 prettier를 함께 사용할 수 있게 해주는 plugin과 충돌을 방지해주는 config 설치

```typescript
npm install --save-dev prettier eslint-plugin-prettier eslint-config-prettier
```

.prettierrc.cjs 파일 생성

```typescript
module.exports = {
  trailingComma: 'es5',
  tabWidth: 2,
  semi: true,
  singleQuote: false,
};
```

plugin 연결 (.eslintrc.cjs 파일 수정)

- 또는 rules를 변경함으로 커스텀을 적용할 수 있다

```typescript
{
  ...
  "extends": "plugin:prettier/recommended",
  ...
}
```

prettier 실행

- package.json에 코드 추가

```typescript
script: {
  ...
  "format": "prettier --cache --write .",
}
```

## import path 경로 줄이기

vite-tsconfig-paths 설치

```typescript
npm i -D vite-tsconfig-paths
```

vite-config.ts 파일 tsconfigPaths() 코드 추가

```typescript
import { defineConfig } from 'vite';
import react from '@vitejs/plugin-react';
import tsconfigPaths from 'vite-tsconfig-paths';

// https://vitejs.dev/config/
export default defineConfig({
  plugins: [react(), tsconfigPaths()],
});
```

tsconfig.json 파일 코드 추가

```typescript
compilerOptions: {
  ...
  "baseUrl": "src",
  "paths": {
    "@/*": ["*"],
    "@components/*": ["components/*"]
  }
  ...
}
```

### 테스트 도구 설치 (Vitest)

[Vitest 공식 문서](https://vitest.dev/guide/)

vitest 설치 명령어

```typescript
npm install -D vitest jsdom @testing-library/react @testing-library/jest-dom
```

package.json 명령어 입력

```typescript
  "scripts": {
    "test": "vitest",
  }
```

tests/setup.ts 파일 생성 및 설정

```typescript
import { afterEach } from 'vitest';
import { cleanup } from '@testing-library/react';
import '@testing-library/jest-dom/vitest';

afterEach(() => {
  cleanup();
});
```

vite.config.js 파일 생성 및 설정

```typescript
 test: {
  environment: 'jsdom',
  setupFiles: ['./tests/setup.ts'],
  testMatch: ['./tests/**/*.test.tsx'],
  globals: true
 }
```

tsconfig.json, tsconfig.node.json 파일에 global 추가

```typescript
// tsconfig.json
// tsconfig.node.json

  "compilerOptions": {
    ...
    "types": ["vitest/globals"]
    ...
  },
```

test 컴포넌트 만들기

```typescript
// tests/App.test.tsx

import { render, screen } from '@testing-library/react';
import App from '../src/App';
// import { describe, expect, it } from "vitest";

describe('App', () => {
  it('renders headline', () => {
    render(<App />);
    const headline = screen.getByText(/It works and you found me!/i);
    expect(headline).toBeInTheDocument();
  });
});

// App.tsx
import './App.css';

function App() {
  return (
    <div>
      <h1>It works and you found me!</h1>
    </div>
  );
}

export default App;
```

💩 Error

### 'Assertion<HTMLElement>' 형식에 'toBeInTheDocument' 속성이 없습니다

tsconfig.json 파일에 아래 코드 추가

```typescript
compileOptions: {
  "types": ["vitest/globals", "@testing-library/jest-dom"]
}
```

### 'React'는 UMD 전역을 참조하지만 현재 파일은 모듈입니다

tsconfig.json 파일에 아래 코드 추가

```typescript
{
  "compilerOptions": {
      ...
    },
  "include": ["src", "**/*.tsx"]
}
```

그 외 참고 문서

- [DaleSeo](https://www.daleseo.com/vitest/)
-
